Данный алгоритм параллельно вычисляет sin(1/x) на заданном отрезке и заданном количестве потоков.

Для этого на родительском потоке отрезок интегрирования разбивается на задачи. Количество задач задается MAX_TASKS в main.h (AMOUNT_TASKS для func.h). Для каждого отрезка задается параметр шага интегрирования, начало и конец отрезка. Данные каждого задания хранятся в структуре task (thread_data для func.h). Эти структуры объединены в очередь задач. Очередь задач представляет собой структуру taskQueue (queue для func.h), содержащую массив заданий, мьютекс, счетчик текущего задания.

Далее инициализируется мьютекс и производится блокировка.

Инициализируем потоки, используя pthread_create. В функцию передаем функцию для потока и структуру-аргумент thr_struct (thread для func.h). Данная структура содержит указатель на очередь заданий и id потока.

После инициализации всех потоков отпускаем мьютекс. И ждем завершения дочерних потоков.

В дочерних потоках получаем аргумент и приводим его к типу (thread *). Получаем указатель на очередь заданий (queue *).

Далее следует рабочий цикл. С помощью мьютекса добиваемся, чтобы доступ к счетчику текущего задания имел только один поток. Поток получив номер текущего задания увеличивает счетчик, отпускает мьютекс и приступает к выполнению задания: получает указатель на задание из очереди и интегрирует на данном отрезке.

Рабочий цикл продолжается, пока существуют невыполненные задания. Когда их не остается, поток завершается.

После завершенния всех потоков родительский поток суммирует отрезки всех заданий, выводит результат, уничтожает мьютекс и завершает программу.